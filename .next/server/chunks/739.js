exports.id=739,exports.ids=[739],exports.modules={40573:(e,a,t)=>{"use strict";t.d(a,{Z:()=>i});var r=t(53854);t(64147);var s=t(4953),l=t.n(s);let i=()=>{var e=t(60398);return(0,r.jsxs)("div",{className:l().loading__wrapper,children:[r.jsx("p",{className:l().text,children:"Подождите, идет загрузка..."}),r.jsx(e,{name:"circle",color:"blue"})]})}},16058:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>E});var r=t(53854),s=t(23180),l=t.n(s),i=t(15951),n=t(20766),o=t(34218),p=t(78578),c=t.n(p);let d=e=>{let[a,t]=(0,o.useState)(!0);(0,o.useEffect)(()=>{t(0)},[]);let s=e=>{t(e)};return(0,r.jsxs)("div",{className:c().wrapper,children:[r.jsx("div",{className:0===a?c().active:c().nonActive,onClick:()=>{s(0),e.showProfile()},children:"Личные данные"}),r.jsx("div",{className:1===a?c().active:c().nonActive,onClick:()=>{s(1),e.showAdresses()},children:"Мои адреса"}),r.jsx("div",{className:2===a?c().active:c().nonActive,onClick:()=>{s(2),e.showSecurity()},children:"Настройки безопасности"})]})};var _=t(72209),u=t.n(_),m=t(39893),h=t(41956),x=t.n(h);t(81069);var v=t(83847);t(48581);var w=t(48157),j=t(39446);let N=()=>{let[e,a]=(0,o.useState)([]),t=t=>{let r=[...e];r.splice(t,1),a(r)};(0,w.v9)(e=>e.localStorage.value);let s=(0,n.CG)(j._U);console.log(s);let[l,i]=(0,o.useState)({address:null}),p=e=>{let{name:a,value:t}=e.target;i({...l,[a]:t})};async function c(e){e.preventDefault();let a={data:{address:l.address}};try{await v.Z.put(`https://quitystrapi.onrender.com/api/profiles/${s}`,a)}catch(e){console.error("post address is failed")}}return(0,r.jsxs)("div",{className:u().wrapper,children:[(0,r.jsxs)("div",{className:u().blockHeader,children:[r.jsx("h3",{className:u().title,children:"Мои адреса"}),r.jsx("button",{className:u().addressButton,onClick:()=>{a([...e,""])},children:"Добавить адрес"})]}),r.jsx("form",{onSubmit:c,children:e.map((e,a)=>(0,r.jsxs)("div",{className:u().addressItem__wrapper,children:[(0,r.jsxs)("div",{className:u().inputAddress,children:[(0,r.jsxs)("label",{htmlFor:"address",className:u().inputLabel,children:["Адрес ",a+1]}),r.jsx("input",{type:"text",className:u().input,name:"address",onChange:e=>p(e)}),(0,r.jsxs)("div",{className:u().correct,children:[r.jsx(x(),{src:m.ZP.edit,width:18,height:18}),r.jsx(x(),{src:m.ZP.bucket,width:18,height:18,onClick:t})]})]}),r.jsx("button",{className:u().addressItem__button,type:"submit",children:"Сохранить"})]},a))})]})};var f=t(40889),y=t.n(f);let g=()=>{let[e,a]=(0,o.useState)();return(0,r.jsxs)("div",{className:y().radioWrapper,onClick:()=>{a(!e)},children:[r.jsx("input",{type:"radio",className:y().inputNotification,name:"notification"}),!e&&r.jsx("div",{className:y().whiteCircle}),e&&r.jsx("div",{className:y().blueCircle})]})};var b=t(91396),S=t.n(b);t(44428);var D=t(40573),P=t(48732);let C=()=>{let[e,a]=(0,o.useState)(!0),[t,s]=(0,o.useState)(),[l,i]=(0,o.useState)(!1),p=()=>{i(!l)},c=e=>{let a=e.toDate().toLocaleDateString();A(e=>({...e,birthday:a}))},[d,_]=(0,o.useState)(null),u=e=>{if(e.target.files){let a=e.target.files[0];_(URL.createObjectURL(a))}},[h,N]=(0,o.useState)(!1),[f,b]=(0,o.useState)(),[C,A]=(0,o.useState)({fullName:null,birthday:null,email:null,phone:null,address:null,avatar:null}),k=(0,w.I0)(),[Z,E]=(0,o.useState)({}),B=e=>{let{name:a,value:t}=e.target;A({...C,[a]:t}),E(e=>({...e,[a]:""}))};async function L(e){e.preventDefault();try{N(!0);let e=new FormData;e.append("files",f[0]);let a=await v.Z.post("https://quitystrapi.onrender.com/api/upload",e),t=a.data[0].id,r={data:{fullName:C.fullName,birthday:C.birthday,email:C.email,phone:C.phone,address:C.address,avatar:t}},s=await v.Z.put(`https://quitystrapi.onrender.com/api/clients/${q}`,r);200===s.status&&alert("Данные успешно сохранены !"),k((0,P.z3)(!0))}catch(e){console.error("post-profile-data is failed")}finally{N(!1)}}let I=(0,w.v9)(e=>e.localStorage.value),[q,M]=(0,o.useState)();(async function(){try{let e=await v.Z.get("https://quitystrapi.onrender.com/api/clients"),a=e.data.data,t=a.find(e=>e.attributes.email===I),r=t.id;M(r)}catch(e){console.error("get frofiles data is failed")}})();let U=(0,n.TL)(),T=()=>{U((0,j.RQ)(q))};return(0,o.useEffect)(()=>{q&&null!==q&&T()},[q]),(0,o.useEffect)(()=>{let e=e=>{let a=document.getElementById("popup-calendar");a&&!a.contains(e.target)&&i(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[l]),(0,r.jsxs)("div",{className:y().wrapper,children:[r.jsx(P.G2,{}),h&&r.jsx(D.Z,{}),(0,r.jsxs)("form",{className:y().form,onSubmit:L,children:[(0,r.jsxs)("div",{className:y().personalData,children:[r.jsx("h3",{className:y().title,children:"Персональные данные"}),(0,r.jsxs)("div",{className:y().avatar__wrapper,children:[(0,r.jsxs)("div",{className:y().avatarInputWrapper,children:[r.jsx("input",{type:"file",name:"avatar",value:C.avatar,onChange:e=>{b(e.target.files),u(e)},placeholder:"Фото",className:y().choosePhoto}),r.jsx(x(),{src:m.ZP.avaEmpty,width:40,height:40,className:y().avaImage}),d&&r.jsx(x(),{src:d,width:50,height:50,className:y().avaPreview})]}),r.jsx("div",{className:y().choosePhotoText,children:"Выбрать фото"})]}),(0,r.jsxs)("div",{className:y().input__wrapper,children:[r.jsx("input",{type:"text",name:"fullName",value:C.fullName,onChange:e=>B(e),placeholder:"ФИО",className:C.fullName?"":y().inputError}),!C.fullName&&r.jsx("span",{className:y().errorMsg,children:"Поле должно быть заполнено"})]}),(0,r.jsxs)("div",{className:y().input__wrapper+" "+y().calendar__wrapper,onClick:()=>{a(!1)},children:[r.jsx("input",{type:"text",name:"birthday",onChange:e=>B(e),value:C.birthday,className:C.birthday?"":y().inputError}),C.birthday?"":r.jsx("span",{className:y().calendarPlaceholder,children:"Дата рождения"}),r.jsx(x(),{src:m.ZP.calendar,className:y().calendar,onClick:()=>{p()},alt:"calendar",width:20,height:20}),l&&r.jsx("div",{id:"popup-calendar",children:r.jsx(S(),{input:!1,timeFormat:!1,onChange:e=>c(e),className:y().calendarDate})}),!C.birthday&&r.jsx("span",{className:y().errorMsg,children:"Поле должно быть заполнено"})]}),(0,r.jsxs)("div",{className:y().input__wrapper,children:[r.jsx("input",{type:"email",name:"email",value:C.email,onChange:e=>B(e),placeholder:"E-mail",className:C.email?"":y().inputError}),!C.email&&r.jsx("span",{className:y().errorMsg,children:"Поле должно быть заполнено"})]}),(0,r.jsxs)("div",{className:y().input__wrapper,children:[r.jsx("input",{type:"text",name:"phone",value:C.phone,onChange:e=>B(e),placeholder:"Телефон",className:C.phone?"":y().inputError}),!C.phone&&r.jsx("span",{className:y().errorMsg,children:"Поле должно быть заполнено"})]}),r.jsx("button",{type:"submit",className:y().saveButton,children:"Сохранить изменения"})]}),(0,r.jsxs)("div",{className:y().notification,children:[r.jsx("h3",{className:y().title,children:"Оповещения"}),(0,r.jsxs)("div",{className:y().input__wrapper,children:[r.jsx(g,{}),r.jsx("span",{className:y().text,children:"Получать письма от сайта gmail.com на свой почтовый ящик"})]})]})]})]})};var A=t(30399),k=t.n(A);let Z=()=>{let e=(0,w.v9)(e=>e.localStorage.value),[a,t]=(0,o.useState)(),[s,l]=(0,o.useState)();async function i(){try{let a=await v.Z.get("https://quitystrapi.onrender.com/api/clients"),r=a.data.data,s=r.find(a=>a.attributes.email===e),i=s.id;t(i);let n=s.attributes.password;l(n)}catch(e){console.error("get clients are failed")}}(0,o.useEffect)(()=>{i()},[]);let[n,p]=(0,o.useState)({currentPassword:null,password:null}),c=e=>{let{name:a,value:t}=e.target;p({...n,[a]:t})};async function d(){let e={data:{password:n.password}};try{await v.Z.put(`https://quitystrapi.onrender.com/api/clients/${a}`,e)}catch(e){console.error("change password is failed")}}let[_,u]=(0,o.useState)(!1),[h,j]=(0,o.useState)(!1),[N,f]=(0,o.useState)(!1);return r.jsx("form",{onSubmit:d,children:(0,r.jsxs)("div",{className:k().security__wrapper,children:[r.jsx("h3",{className:k().title,children:"Смена пароля"}),(0,r.jsxs)("div",{className:k().input__wrapper,children:[r.jsx("input",{type:_?"text":"password",placeholder:"Введите текущий пароль",name:"currentPassword",onChange:e=>c(e),onBlur:()=>{n.currentPassword!==s&&alert("Вы ввели неправильный пароль !")}}),r.jsx(x(),{src:_?m.ZP.hide:m.ZP.show,width:40,height:20,className:k().eye,onClick:()=>{u(!_)}})]}),(0,r.jsxs)("div",{className:k().input__wrapper,children:[r.jsx("input",{type:h?"text":"password",placeholder:"Новый пароль",name:"password",onChange:e=>c(e)}),r.jsx(x(),{src:h?m.ZP.hide:m.ZP.show,width:40,height:20,className:k().eye,onClick:()=>{j(!h)}})]}),(0,r.jsxs)("div",{className:k().input__wrapper,children:[r.jsx("input",{type:N?"text":"password",placeholder:"Повторите новый пароль",name:"repeatedPassword"}),r.jsx(x(),{src:N?m.ZP.hide:m.ZP.show,width:40,height:20,className:k().eye,onClick:()=>{f(!N)}})]}),r.jsx("button",{type:"submit",className:k().securityButton,children:"Сохранить изменения"})]})})};function E(){let e=(0,n.TL)(),a=(0,n.CG)(e=>e.profileData.currentComponent);return r.jsx("div",{className:l().wrapper,children:r.jsx("div",{className:"container",children:(0,r.jsxs)("main",{className:l().main__wrapper,children:[r.jsx("h2",{className:l().title,children:"Мои профиль"}),r.jsx(d,{showAdresses:()=>{e((0,i.JN)())},showProfile:()=>{e((0,i.UX)())},showSecurity:()=>{e((0,i.Ik)())}}),"personalData"===a&&r.jsx(C,{}),"myAdresses"===a&&r.jsx(N,{}),"securitySettings"===a&&r.jsx(Z,{})]})})})}},4953:e=>{e.exports={text:"loading_text__hwEzs",loading__wrapper:"loading_loading__wrapper__BofbR"}},72209:e=>{e.exports={wrapper:"myAdresses_wrapper__KOZm6",blockHeader:"myAdresses_blockHeader__uSr4j",title:"myAdresses_title__VAqRG",addressButton:"myAdresses_addressButton__82xpk",inputAddress:"myAdresses_inputAddress__kozDr",input:"myAdresses_input__NqGzN",inputLabel:"myAdresses_inputLabel__tbeqN",correct:"myAdresses_correct__7gXPo",addressItem__button:"myAdresses_addressItem__button__rT7jQ"}},40889:e=>{e.exports={wrapper:"personalData_wrapper__rwiVG",form:"personalData_form__9Ep2H",personalData:"personalData_personalData__ePShB",title:"personalData_title__5XnwA",input__wrapper:"personalData_input__wrapper__p6oP9",inputError:"personalData_inputError__VQZm4",errorMsg:"personalData_errorMsg__UYSb5",calendar:"personalData_calendar__XKDLq",calendar__wrapper:"personalData_calendar__wrapper__X5fL8",calendarPlaceholder:"personalData_calendarPlaceholder__Pk03U",calendarDate:"personalData_calendarDate__xfgBT",avatar__wrapper:"personalData_avatar__wrapper__B_VXe",avatarInputWrapper:"personalData_avatarInputWrapper__d_GH5",avaImage:"personalData_avaImage__kiVj7",avaPreview:"personalData_avaPreview__kmcbe",choosePhotoText:"personalData_choosePhotoText__ipeUL",saveButton:"personalData_saveButton___LsBP",notification:"personalData_notification__RvCLr",radioWrapper:"personalData_radioWrapper__WjZNu",inputNotification:"personalData_inputNotification__HNN8z",whiteCircle:"personalData_whiteCircle__yCtrp",blueCircle:"personalData_blueCircle__o_u1i"}},23180:e=>{e.exports={wrapper:"profile_wrapper__dRXs9",main__wrapper:"profile_main__wrapper__FbUnO",title:"profile_title__TC7yY",firstPage__wrapper:"profile_firstPage__wrapper___7N_T",registrationForm__wrapper:"profile_registrationForm__wrapper__MUVfA",registrationForm__body:"profile_registrationForm__body__cYMt5"}},78578:e=>{e.exports={wrapper:"profilePageNavigation_wrapper__vQZXb",active:"profilePageNavigation_active__o1gHU",nonActive:"profilePageNavigation_nonActive__TXY_U"}},30399:e=>{e.exports={security__wrapper:"profileSecurity_security__wrapper__xEzpK",title:"profileSecurity_title__Xg2Mt",input__wrapper:"profileSecurity_input__wrapper__o6swf",eye:"profileSecurity_eye__Eblo1",securityButton:"profileSecurity_securityButton__GBRYL"}},42537:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$typeof:()=>i,__esModule:()=>l,default:()=>o});var r=t(95153);let s=(0,r.createProxy)(String.raw`C:\Avada-Media\quity-next\app\profile\page.js`),{__esModule:l,$$typeof:i}=s,n=s.default,o=n}};