(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{1687:function(e,t,a){Promise.resolve().then(a.bind(a,90960)),Promise.resolve().then(a.t.bind(a,75179,23)),Promise.resolve().then(a.bind(a,76716))},76716:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var s=a(57437),r=a(2265),i=a(25009),n=a.n(i),l=a(61396),o=a.n(l),p=a(92173);let c={_origin:"https://api.emailjs.com"},d=(e,t,a)=>{if(!e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!a)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class m{constructor(e){this.status=e?e.status:0,this.text=e?e.responseText:"Network Error"}}let u=(e,t,a={})=>new Promise((s,r)=>{let i=new XMLHttpRequest;i.addEventListener("load",({target:e})=>{let t=new m(e);200===t.status||"OK"===t.text?s(t):r(t)}),i.addEventListener("error",({target:e})=>{r(new m(e))}),i.open("POST",c._origin+e,!0),Object.keys(a).forEach(e=>{i.setRequestHeader(e,a[e])}),i.send(t)}),h=e=>{let t;if(!(t="string"==typeof e?document.querySelector(e):e)||"FORM"!==t.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t};var _={init:(e,t="https://api.emailjs.com")=>{c._userID=e,c._origin=t},send:(e,t,a,s)=>{let r=s||c._userID;return d(r,e,t),u("/api/v1.0/email/send",JSON.stringify({lib_version:"3.11.0",user_id:r,service_id:e,template_id:t,template_params:a}),{"Content-type":"application/json"})},sendForm:(e,t,a,s)=>{let r=s||c._userID,i=h(a);d(r,e,t);let n=new FormData(i);return n.append("lib_version","3.11.0"),n.append("service_id",e),n.append("template_id",t),n.append("user_id",r),u("/api/v1.0/email/send-form",n)}},w=a(83804),x=a(62566),f=a(37983),v=a(16691),g=a.n(v);a(15291),a(73501);var j=()=>{let[e,t]=(0,r.useState)("");{(0,r.useEffect)(()=>{localStorage.setItem("id",e)},[e]);let t=(0,x.TL)();(0,r.useEffect)(()=>{t((0,w.zv)(e))},[t,e])}(0,x.CG)(w.yA);let[a,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{i(0)},[]);let l=e=>{i(e)},[c,d]=(0,r.useState)(),[m,u]=(0,r.useState)({fullName:null,email:null,phone:null,password:null,passwordConfirmation:null}),h=e=>{let{name:t,value:a}=e.target;u({...m,[t]:a})},v=async()=>{try{let e=await p.Z.get("https://quitystrapi.onrender.com/api/clients?populate=*"),t=e.data.data,a=t.find(e=>e.attributes.email===m.email);a?(a.attributes.email,alert("Пользователь с таким email уже существует !")):alert("Пользователя с таким email нет в системе !")}catch(e){console.error("Error in handleBlur:",e)}},j=async e=>{e.preventDefault();try{if(m.password!==m.passwordConfirmation){alert("Вы ввели неправильный пароль");return}if(m.password.length<=6){alert("Вы ввели слишком короткий пароль");return}if(!/\d/.test(m.password)){alert("Пароль должен содержать хотя бы одну цифру");return}if(!/[a-zA-Z]/.test(m.password)){alert("Пароль должен содержать хотя бы одну букву");return}let e={data:{fullName:m.fullName,email:m.email,phone:m.phone,password:m.password}},t=await p.Z.post("https://quitystrapi.onrender.com/api/clients",e,{params:{populate:"password"}});200===t.status&&u({fullName:"",email:"",phone:"",password:"",passwordConfirmation:""}),setTimeout(()=>{200===t.status?alert("Вы успешно зарегистрировались!"):alert("Что-то пошло не так, повторите попытку")},1e3),setTimeout(()=>{l(0)},1500)}catch(e){console.error("fetchdata failed")}};(0,r.useEffect)(()=>{p.Z.get("https://quitystrapi.onrender.com/api/clients?populate=*").then(e=>{let t=e.data.data;d(t)}).catch(e=>{console.error("Error fetching data:",e)})},[]);let[N,y]=(0,r.useState)([]);async function b(){try{let e=await p.Z.get("https://quitystrapi.onrender.com/api/clients?populate=*"),t=e.data.data;y(t);let a=t.find(e=>(e.attributes.email===m.email||e.attributes.phone===m.email)&&e.attributes.password===m.password);a?(window.location.href="/profile",alert("переход на главную страницу")):alert("Вы ввели неправильный логин или пароль")}catch(e){console.error("get dataClients failed")}}let C=()=>{let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="";for(let a=0;a<8;a++){let a=Math.floor(Math.random()*e.length);t+=e[a]}return t},[k,E]=(0,r.useState)();(0,r.useEffect)(()=>{let e=C();E(e)},[]);let[S,F]=(0,r.useState)(null),[Z,q]=(0,r.useState)();console.log(S);let I=async e=>{e.preventDefault(),T(e);let t=e.target.elements.user_email.value;F(t);try{await _.send("service_npekptm","template_kyh2hsb",{to:t,to_email:S,from_name:"Maksym",to_name:"Guest",message:"Ваш новый пароль: ".concat(k)},"MC7BRzxDCdfYOwX2U")}catch(e){console.error("Ошибка при отправке письма:",e.text)}};async function T(e){try{let t=await p.Z.get("https://quitystrapi.onrender.com/api/clients?populate=*"),a=t.data.data,s=a.find(t=>t.attributes.email===e.target.elements.user_email.value),r=s.id;console.log(r);let i=await p.Z.put("https://quitystrapi.onrender.com/api/clients/".concat(r),{data:{password:k}});200===i.status&&(u({user_email:""}),alert("Ваш пароль успешно изменен"))}catch(e){console.error("change password failed",e)}}let D=()=>{setTimeout(()=>{l(0)},1e3)},[B,P]=(0,r.useState)(!0),O=()=>{P(!B)};return(0,s.jsx)("div",{className:n().registration__wrapper,children:(0,s.jsx)("div",{className:n().registration,children:(0,s.jsxs)("div",{className:n().registration__container,children:[(0,s.jsxs)("div",{className:n().navigation,children:[(0,s.jsx)("h3",{className:"".concat(0===a?n().active:n().nonActive),onClick:()=>l(0),children:"Вход"}),(0,s.jsx)("span",{className:n().slash,children:"/"}),(0,s.jsx)("h3",{className:"".concat(1===a?n().active:n().nonActive),onClick:()=>l(1),children:"Регистрация"})]}),0===a&&(0,s.jsxs)("div",{className:n().enter__body,children:[(0,s.jsxs)("div",{className:n().inputs__wrapper,children:[(0,s.jsxs)("div",{className:n().input__wrapper,children:[(0,s.jsx)("label",{htmlFor:"email",children:"Email или телефон *"}),(0,s.jsx)("input",{name:"email",value:m.email,onChange:e=>{h(e),t(e.target.value)}})]}),(0,s.jsxs)("div",{className:n().input__wrapper,children:[(0,s.jsx)("label",{htmlFor:"password",children:"Пароль *"}),(0,s.jsx)("input",{type:"password",name:"password",value:m.password,onChange:h})]})]}),(0,s.jsx)("div",{className:n().reminder,onClick:()=>l(2),children:"Забыл пароль?"}),(0,s.jsx)("div",{className:n().button__wrapper,onClick:b,children:(0,s.jsx)("button",{className:n().registrationButton,children:"Войти"})})]}),(0,s.jsx)("form",{onSubmit:j,children:1===a&&(0,s.jsxs)("div",{className:n().inputs__wrapper,children:[(0,s.jsxs)("div",{className:n().input__wrapper,children:[(0,s.jsx)("label",{htmlFor:"fullName",children:"ФИО *"}),(0,s.jsx)("input",{type:"text",name:"fullName",value:m.fullName,onChange:h})]}),(0,s.jsxs)("div",{className:n().input__wrapper,children:[(0,s.jsx)("label",{htmlFor:"email",children:"Email *"}),(0,s.jsx)("input",{type:"email",name:"email",value:m.email,onChange:h,onBlur:v})]}),(0,s.jsxs)("div",{className:n().input__wrapper,children:[(0,s.jsx)("label",{htmlFor:"phone",children:"Телефон *"}),(0,s.jsx)("input",{type:"number",name:"phone",value:m.phone,onChange:h})]}),B?(0,s.jsxs)("div",{className:n().input__wrapper,children:[(0,s.jsx)("label",{htmlFor:"password",children:"Придумайте пароль *"}),(0,s.jsx)("input",{type:"password",name:"password",value:m.password,onChange:h}),(0,s.jsx)(g(),{src:f.ZP.show,alt:"show",width:16,height:13,className:n().eyeIcon,onClick:()=>O()})]}):(0,s.jsxs)("div",{className:n().input__wrapper,children:[(0,s.jsx)("label",{htmlFor:"password",children:"Придумайте пароль *"}),(0,s.jsx)("input",{type:"text",name:"password",value:m.password,onChange:h}),(0,s.jsx)(g(),{src:f.ZP.hide,alt:"hide",width:16,height:13,className:n().eyeIcon,onClick:()=>O()})]}),(0,s.jsx)("div",{className:n().passwordHint,children:"Минимум 6 символов (букв, цифр и спец. знаков)"}),B?(0,s.jsxs)("div",{className:n().input__wrapper,children:[(0,s.jsx)("label",{htmlFor:"passwordConfirmation",children:"Подтвердите пароль *"}),(0,s.jsx)("input",{type:"password",name:"passwordConfirmation",value:m.passwordConfirmation,onChange:h}),(0,s.jsx)(g(),{src:f.ZP.show,alt:"show",width:16,height:13,className:n().eyeIcon,onClick:()=>O()})]}):(0,s.jsxs)("div",{className:n().input__wrapper,children:[(0,s.jsx)("label",{htmlFor:"passwordConfirmation",children:"Подтвердите пароль *"}),(0,s.jsx)("input",{type:"text",name:"passwordConfirmation",value:m.passwordConfirmation,onChange:h}),(0,s.jsx)(g(),{src:f.ZP.hide,alt:"hide",width:16,height:13,className:n().eyeIcon,onClick:()=>O()})]}),(0,s.jsxs)("div",{className:n().approvement,children:["Я принимаю условия"," ",(0,s.jsx)(o(),{href:"#",children:(0,s.jsx)("span",{className:n().colored,children:"Публичной оферты"})})," ","и"," ",(0,s.jsx)(o(),{href:"#",children:(0,s.jsx)("span",{className:n().colored,children:"Пользовательского соглашения"})})]}),(0,s.jsx)("div",{className:n().button__wrapper,children:(0,s.jsx)("button",{className:n().registrationButton,type:"submit",children:"Зарегистриоватся"})})]})}),(0,s.jsx)("form",{onSubmit:I,children:2===a&&(0,s.jsxs)("div",{className:n().enter__body,children:[(0,s.jsx)("h3",{className:n().active,children:"Новый пароль будет отправлен на Ваш почтовый ящик"}),(0,s.jsx)("div",{className:n().inputs__wrapper,children:(0,s.jsxs)("div",{className:n().input__wrapper,children:[(0,s.jsx)("label",{htmlFor:"email",children:" Введите Email"}),(0,s.jsx)("input",{type:"email",name:"user_email",onChange:h})]})}),(0,s.jsx)("div",{className:n().reminder,onClick:()=>l(0),children:"< назад"}),(0,s.jsx)("div",{className:n().button__wrapper,children:(0,s.jsx)("button",{className:n().registrationButton,type:"submit",onClick:()=>D(),children:"Отправить"})})]})})]})})})}},25009:function(e){e.exports={registration__wrapper:"registration_registration__wrapper__yNAHJ",registration:"registration_registration__wpm2P",registration__container:"registration_registration__container__CCtZL",navigation:"registration_navigation__Nol0G",active:"registration_active__feIe_",nonActive:"registration_nonActive__OrDJG",slash:"registration_slash__Dddrq",inputs__wrapper:"registration_inputs__wrapper__1Z8wg",input__wrapper:"registration_input__wrapper__7Tjax",eyeIcon:"registration_eyeIcon__3xnkc",passwordHint:"registration_passwordHint__BVnJc",approvement:"registration_approvement__WAY72",colored:"registration_colored__18Rwc",button__wrapper:"registration_button__wrapper__T1Fv_",registrationButton:"registration_registrationButton__xyDYr",enter__body:"registration_enter__body__kvWhB",reminder:"registration_reminder__lZiwY"}},61396:function(e,t,a){e.exports=a(68326)}},function(e){e.O(0,[6990,1795,6691,2173,8326,1277,6506,3298,2971,2472,1744],function(){return e(e.s=1687)}),_N_E=e.O()}]);